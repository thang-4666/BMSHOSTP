SET DEFINE OFF;DELETE FROM SEARCH WHERE 1 = 1 AND NVL(SEARCHCODE,'NULL') = NVL('MR4001','NULL');Insert into SEARCH   (SEARCHCODE, SEARCHTITLE, EN_SEARCHTITLE, SEARCHCMDSQL, OBJNAME, FRMNAME, ORDERBYCMDSQL, TLTXCD, CNTRECORD, ROWPERPAGE, AUTOSEARCH, INTERVAL, AUTHCODE, ROWLIMIT, CMDTYPE, CONDDEFFLD, BANKINQ, BANKACCT, CHKSCOPECMDSQL) Values   ('MR4001', 'Tra cứu Chứng khoán ký quỹ tài khoản', 'Securities for credit line', 'select  bk.*, MRMAXQTTY-USEDMRMAXQTTY REMAINMRMAXQTTY from (
SELECT b.basketid, b.basketname,''CL'' baskettype,TYP.AUTOID, TYP.SYMBOL, TYP.MRRATIORATE, TYP.MRRATIOLOAN, TYP.MRPRICERATE, TYP.MRPRICELOAN,TYP.MRMAXQTTY,
    fn_getroomusedbybasket(sb.codeid, b.BASKETID) USEDMRMAXQTTY
FROM SECBASKET TYP, sbsecurities sb, basket b
WHERE typ.symbol = sb.symbol AND typ.basketid = b.basketid) bk ORDER BY BASKETID,SYMBOL', 'MRTYPE', '', '', '', NULL, 50, 'N', 30, 'NYNNYYYNNN', 'Y', 'T', '', 'N', '', '');COMMIT;